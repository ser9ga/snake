(this.webpackJsonpsnake=this.webpackJsonpsnake||[]).push([[0],[,,function(e,t,n){e.exports={container:"style_container__s17Mb",buttonContainer:"style_buttonContainer__24aK-",upButtonContainer:"style_upButtonContainer__rztdS",leftButtonContainer:"style_leftButtonContainer__b0vju",rightButtonContainer:"style_rightButtonContainer__1GQKw",downButtonContainer:"style_downButtonContainer__1y92o",squareButton:"style_squareButton__3S6Wx",triangle:"style_triangle__1eMup",upButton:"style_upButton__3Ba2t",leftButton:"style_leftButton__J1J1t",rightButton:"style_rightButton__1Q5h3",downButton:"style_downButton__nwZN_"}},,,function(e,t,n){e.exports={squareWrapper:"style_squareWrapper__2hx_P",square:"style_square__RJiEc",filledSquare:"style_filledSquare__1h0_w",innerSquare:"style_innerSquare__2d-tr",filledInnerSquare:"style_filledInnerSquare__16Gk6"}},,,,function(e,t,n){e.exports={App:"style_App__3eN9N",screen:"style_screen__2I8Xz",screenFrame:"style_screenFrame__cvNbC",rowLine:"style_rowLine__3hUhg"}},function(e,t,n){e.exports={buttonPanel:"style_buttonPanel__gHkIT",button:"style_button__1bM-f"}},function(e,t,n){e.exports={container:"style_container__2Oapd",screenWrap:"style_screenWrap__FCDwq",actionButtonsWrapper:"style_actionButtonsWrapper__3VPz-"}},,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),c=n(13),i=n.n(c),o=n(4),s=n(5),u=n.n(s),l=n(0),d=function(e){var t=e.isFilled;return Object(l.jsx)("div",{className:u.a.squareWrapper,children:Object(l.jsx)("div",{className:"".concat(u.a.square," ").concat(t&&u.a.filledSquare),children:Object(l.jsx)("div",{className:"".concat(u.a.innerSquare," ").concat(t&&u.a.filledInnerSquare)})})})},b=Object(a.memo)(d),j=n(9),O=n.n(j),f=function(e){var t=e.screen,n=e.fieldSize;return Object(l.jsx)("div",{className:O.a.screen,children:Object(l.jsx)("div",{className:O.a.screenFrame,children:Object(o.a)(Array(n.y)).map((function(e,a){return Object(l.jsx)("div",{className:O.a.rowLine,children:Object(o.a)(Array(n.x)).map((function(e,r){var c=n.x*a+r;return Object(l.jsx)(b,{isFilled:t[c].isFilled},"".concat(r,"_").concat(a))}))},a)}))})})},_=Object(a.memo)(f),y=n(14),x=n(7),p=n(1),m="prepareAndExecNewTurn",v="controlEventHandler",h="startOrPause",g="resetHandler",w="stopInterval",B="startInterval",S={left:{dir:"backward",ax:"horizontal"},right:{dir:"forward",ax:"horizontal"},up:{dir:"backward",ax:"vertical"},down:{dir:"forward",ax:"vertical"}},N=n(2),C=n.n(N),G=function(e){var t=e.dispatchSnakeState,n=function(e){return t({type:v,payload:e})};return Object(l.jsxs)("div",{className:C.a.container,children:[Object(l.jsx)("div",{className:"".concat(C.a.upButtonContainer," ").concat(C.a.buttonContainer),onClick:function(){return n(S.up)},children:Object(l.jsx)("div",{className:"".concat(C.a.squareButton," ").concat(C.a.buttonContainer," ").concat(C.a.upButton),children:Object(l.jsx)("div",{className:C.a.triangle})})}),Object(l.jsx)("div",{className:"".concat(C.a.leftButtonContainer," ").concat(C.a.buttonContainer),onClick:function(){return n(S.left)},children:Object(l.jsx)("div",{className:"".concat(C.a.squareButton," ").concat(C.a.buttonContainer," ").concat(C.a.leftButton),children:Object(l.jsx)("div",{className:C.a.triangle})})}),Object(l.jsx)("div",{className:"".concat(C.a.rightButtonContainer," ").concat(C.a.buttonContainer),onClick:function(){return n(S.right)},children:Object(l.jsx)("div",{className:"".concat(C.a.squareButton," ").concat(C.a.buttonContainer," ").concat(C.a.rightButton),children:Object(l.jsx)("div",{className:C.a.triangle})})}),Object(l.jsx)("div",{className:"".concat(C.a.downButtonContainer," ").concat(C.a.buttonContainer),onClick:function(){return n(S.down)},children:Object(l.jsx)("div",{className:"".concat(C.a.squareButton," ").concat(C.a.buttonContainer," ").concat(C.a.downButton),children:Object(l.jsx)("div",{className:C.a.triangle})})})]})},k=n(10),F=n.n(k),q=function(e){var t=e.startOrPauseGame,n=e.snakeState,a=e.resetGame;return Object(l.jsxs)("div",{className:F.a.buttonPanel,children:[Object(l.jsx)("button",{className:F.a.button,onClick:t,children:n.isGameRunning||n.restartFlag?"Pause":"Start"}),Object(l.jsx)("button",{className:F.a.button,onClick:a,children:"Reset"})]})},R=n(11),D=n.n(R),I=function(){var e=function(){var e=Object(a.useMemo)((function(){return{x:26,y:18}}),[]),t=Object(o.a)(Array(4)).map((function(e,t){return{x:t+4,y:5,isFilled:!!t,isTarget:!1}})),n=Object(a.useMemo)((function(){return Object(o.a)(Array(e.y)).flatMap((function(t,n){return Object(o.a)(Array(e.x)).map((function(e,t){return{x:t,y:n,isFilled:!1,isTarget:!1}}))}))}),[e]),r=Object(a.useMemo)((function(){return n.reduce((function(t,n){return 0===n.x||n.x===e.x-1||0===n.y||n.y===e.y-1?t.concat(Object(p.a)(Object(p.a)({},n),{},{isFilled:!0})):t}),[])}),[e]),c=function(t,n){var a=Object(o.a)(t);return n.forEach((function(t){return a[e.x*t.y+t.x]=t})),a},i={restartFlag:!1,isGameRunning:!1,isMatchIsOn:!1,isGameOver:!1,body:Object(o.a)(t),screen:c(n,r),currentDirection:{dir:"forward",ax:"horizontal"},nextDirection:{dir:"forward",ax:"horizontal"}},s=function(e){var t=Object(p.a)({},e),n=t.body,a=n[0].isFilled?{}:n.shift();n[0].isFilled=!0;var r=t.currentDirection.ax===t.nextDirection.ax?"currentDirection":"nextDirection",c="horizontal"===t[r].ax?"x":"y",i=Object(p.a)({},n[n.length-1]),o=function(t){var n;return Object(p.a)(Object(p.a)({},t),{},(n={},Object(x.a)(n,c,"forward"===e[r].dir?t[c]+1:t[c]-1),Object(x.a)(n,"isTarget",!1),n))},s=o(i);return{filteredBodyState:n,direction:r,currenHead:i,cutTail:a,getNextBodyPixel:o,newHead:s}},u=function(t,n){var a=Object(o.a)(t);n.forEach((function(t){a.splice([e.x*t.y+t.x],1)}));var r=a.filter((function(e){return!e.isFilled}));return Object(p.a)(Object(p.a)({},r[Math.floor(Math.random()*r.length)]),{},{isFilled:!0,isTarget:!0})},l=function(e){var n=s(e).newHead,a=u(e.screen,[].concat(Object(o.a)(t),[n]));return{screen:c(e.screen,[a])}},d=Object(a.useReducer)((function(a,d){if(d.type===m){var b=s(a),j=b.filteredBodyState,O=b.direction,f=b.cutTail,_=b.newHead,y=Object(p.a)({},a.screen[e.x*_.y+_.x]);if(y.isFilled&&!y.isTarget)return Object(p.a)(Object(p.a)({},a),{},{isGameRunning:!1,isMatchIsOn:!1,isGameOver:!0,currentDirection:{dir:"forward",ax:"horizontal"},nextDirection:{dir:"forward",ax:"horizontal"}});var x=Object(o.a)(j);y.isTarget&&x.splice(1,0,Object(p.a)(Object(p.a)({},x[0]),{},{isFilled:!1})),x=x.map((function(e,t){return 0===t?Object(p.a)(Object(p.a)({},e),{},{isFilled:!1}):e})).concat(_);var S=c(a.screen,x);y.isTarget&&(S=c(S,[u(S,[f])]));var N=a[O];return Object(p.a)(Object(p.a)({},a),{},{screen:S,body:x,currentDirection:N})}if(d.type===v){var C=d.payload;return(a.nextDirection.dir!==(null===C||void 0===C?void 0:C.dir)||a.nextDirection.ax!==(null===C||void 0===C?void 0:C.ax))&&C&&a.isGameRunning?Object(p.a)(Object(p.a)({},a),{},{nextDirection:C}):a}if(d.type===h){var G=a.isGameRunning,k=a.isMatchIsOn,F=a.isGameOver,q=a.body,R=a.screen,D=Object(p.a)(Object(p.a)({},a),{},{isGameOver:!1,isMatchIsOn:!0,isGameRunning:!G,screen:k?R:c(n,[].concat(Object(o.a)(r),Object(o.a)(t))),body:F?Object(o.a)(i.body):q});return Object(p.a)(Object(p.a)({},D),!k&&l(D))}if(d.type===g){var I=a.restartFlag,M=a.isGameRunning,z=a.isMatchIsOn,P=a.isGameOver,A={isGameRunning:!(z||!P)||M,isMatchIsOn:!!I||P},E=I||P?{screen:c(n,[].concat(Object(o.a)(r),Object(o.a)(t)))}:{},T=Object(p.a)(Object(p.a)(Object(p.a)(Object(p.a)(Object(p.a)({},a),i),A),E),{},{restartFlag:I});return Object(p.a)(Object(p.a)({},T),(I&&z||P)&&l(T))}return d.type===w?Object(p.a)(Object(p.a)({},a),{},{restartFlag:a.isGameRunning||a.isGameOver,isGameRunning:!1}):d.type===B?Object(p.a)(Object(p.a)({},a),{},{restartFlag:!1,isGameRunning:a.restartFlag}):new Error}),i),b=Object(y.a)(d,2),j=b[0],O=b[1],f=function(){O({type:w}),O({type:g}),O({type:B})},_=function(){O({type:h})};return{fieldSize:e,snakeState:j,dispatchSnakeState:O,startOrPauseGame:_,resetGame:f,keyPressHandler:function(e){e.preventDefault();var t={ArrowLeft:S.left,ArrowRight:S.right,ArrowUp:S.up,ArrowDown:S.down,KeyA:S.left,KeyD:S.right,KeyW:S.up,KeyS:S.down}[e.code];O({type:v,payload:t}),"Space"===e.code&&_(),"Backspace"===e.code&&f()}}}(),t=e.fieldSize,n=e.snakeState,r=e.dispatchSnakeState,c=e.startOrPauseGame,i=e.resetGame;return function(e){var t=function(t){return e(t)};Object(a.useEffect)((function(){return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[])}(e.keyPressHandler),function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){e.isGameRunning&&(n.current=setInterval((function(){return t({type:m})}),150)),e.isGameRunning||(clearInterval(n.current),n.current=null)}),[e.isGameRunning])}(n,r),Object(l.jsxs)("div",{className:D.a.container,children:[Object(l.jsx)("div",{className:D.a.screenWrap,children:Object(l.jsx)(_,{screen:n.screen,fieldSize:t})}),Object(l.jsx)("div",{className:D.a.actionButtonsWrapper,children:Object(l.jsx)(q,{startOrPauseGame:c,snakeState:n,resetGame:i})}),Object(l.jsx)(G,{dispatchSnakeState:r})]})};n(20);i.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(I,{})}),document.getElementById("root"))}],[[21,1,2]]]);
//# sourceMappingURL=main.06247b4e.chunk.js.map